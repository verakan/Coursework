<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmetic Shop</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background-color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* –®–∞–ø–∫–∞ */
        .header {
            background-color: #ffb6c1;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: relative;
        }

        .header h1 {
            color: white;
            font-size: 24px;
            letter-spacing: 1px;
            display: inline-block;
            margin: 0 auto;
        }

        /* –ö–Ω–æ–ø–∫–∞ –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ */
        .auth-btn {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            padding: 8px 15px;
            background-color: white;
            color: #e91e63;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .auth-btn:hover {
            background-color: #f8f8f8;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        /* –ë–ª–æ–∫ –ø—Ä–æ—Ñ–∏–ª—è (–ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞) */
        .profile-container {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .profile-icon {
            width: 32px;
            height: 32px;
            background-color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .profile-icon::after {
            content: "üë§";
            font-size: 18px;
        }

        .logout-btn {
            padding: 6px 12px;
            background-color: white;
            color: #e91e63;
            border: none;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            background-color: #f8f8f8;
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            overflow-y: auto;
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .close-btn {
            position: absolute;
            right: 20px;
            top: 15px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            color: #666;
        }

        .close-btn:hover {
            color: #e91e63;
        }

        .tab-container {
            display: flex;
            margin-bottom: 25px;
            border-bottom: 1px solid #eee;
        }

        .tab {
            flex: 1;
            padding: 12px 0;
            text-align: center;
            cursor: pointer;
            color: #666;
            font-weight: 600;
            position: relative;
        }

        .tab.active {
            color: #e91e63;
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: #e91e63;
        }

        .auth-form {
            display: none;
            animation: slideIn 0.4s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .auth-form.active {
            display: block;
        }

        .auth-form h2 {
            color: #333;
            margin-bottom: 25px;
            text-align: center;
            font-size: 22px;
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-size: 14px;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 15px;
            transition: all 0.3s;
        }

        .form-group input:focus {
            border-color: #ffb6c1;
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 182, 193, 0.2);
        }

        .remember-group {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .remember-checkbox {
            margin-right: 10px;
        }

        .form-actions {
            margin-top: 25px;
        }

        .submit-btn {
            width: 100%;
            padding: 14px;
            background-color: #ffb6c1;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .submit-btn:hover {
            background-color: #e91e63;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(233, 30, 99, 0.3);
        }

        .auth-footer {
            text-align: center;
            margin-top: 20px;
            color: #666;
            font-size: 14px;
        }

        .auth-footer a {
            color: #e91e63;
            text-decoration: none;
            font-weight: 600;
        }

        /* –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –º–∞–≥–∞–∑–∏–Ω–∞ */
        .main-content-header {
            display: flex;
            flex-direction: column;
            padding: 0 20px;
            margin-bottom: 20px;
        }

        .search-row {
            display: flex;
            padding: 15px 0;
            align-items: center;
        }

        .search-container {
            display: flex;
            flex: 1;
            margin-right: 15px;
        }

        .search-input {
            flex: 1;
            padding: 12px 20px;
            border: 1px solid #e0e0e0;
            border-radius: 25px;
            font-size: 16px;
            outline: none;
            transition: all 0.3s;
        }

        .search-input:focus {
            border-color: #ffb6c1;
            box-shadow: 0 0 0 3px rgba(255, 182, 193, 0.2);
        }

        .catalog-btn {
            padding: 12px 25px;
            background-color: #ffb6c1;
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .catalog-btn:hover {
            background-color: #e91e63;
            transform: translateY(-2px);
        }

        .top-categories-title {
            font-size: 18px;
            font-weight: bold;
            color: #e91e63;
            margin: 15px 0 10px 0;
            padding-left: 5px;
        }

        .top-categories-row {
            width: 100%;
            overflow-x: auto;
            padding-bottom: 15px;
            -webkit-overflow-scrolling: touch;
        }

        .top-categories-row::-webkit-scrollbar {
            height: 6px;
        }

        .top-categories-row::-webkit-scrollbar-thumb {
            background-color: #fff5f7;
            border-radius: 3px;
        }

        .top-categories-horizontal {
            display: inline-flex;
            gap: 15px;
            padding: 10px 0;
            white-space: nowrap;
        }

        .top-category-horizontal {
            padding: 12px 25px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 25px;
            background-color: #fff5f7;
            border: 2px solid #fff5f7;
            color: #e91e63;
            cursor: pointer;
            transition: all 0.3s;
            flex-shrink: 0;
        }

        .top-category-horizontal:hover {
            background-color: #fcd6dc;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(139, 199, 224, 0.3);
        }

        .nav-container {
            width: 100%;
            overflow-x: auto;
            padding-bottom: 15px;
            margin-bottom: 20px;
            -webkit-overflow-scrolling: touch;
        }

        .nav-container::-webkit-scrollbar {
            height: 6px;
        }

        .nav-container::-webkit-scrollbar-thumb {
            background-color: #ffb6c1;
            border-radius: 3px;
        }

        .main-nav {
            display: inline-flex;
            gap: 10px;
            padding: 0 20px 10px;
            white-space: nowrap;
        }

        .nav-item {
            padding: 12px 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 30px;
            border: 2px solid #ffb6c1;
            color: #e91e63;
            background-color: white;
            text-align: center;
            flex-shrink: 0;
        }

        .nav-item:hover {
            background-color: #ffb6c1;
            color: white;
            box-shadow: 0 5px 15px rgba(233, 30, 99, 0.2);
            transform: translateY(-3px);
        }

        .content {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ */
.products-container {
    padding: 20px;
    margin-top: 30px;
}

.section-title {
    color: #e91e63;
    margin-bottom: 20px;
    font-size: 24px;
    text-align: center;
}

.products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
    padding: 10px;
}

.product-card {
    background: white;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    transition: all 0.3s;
}

.product-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(233, 30, 99, 0.2);
}

.product-image {
    height: 200px;
    background-color: #f5f5f5;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 50px;
}

.product-info {
    padding: 15px;
}

.product-title {
    font-size: 16px;
    font-weight: bold;
    margin-bottom: 8px;
    color: #333;
}

.product-price {
    color: #e91e63;
    font-weight: bold;
    font-size: 18px;
    margin-bottom: 12px;
}

.add-to-cart-btn {
    width: 100%;
    padding: 10px;
    background-color: #ffb6c1;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.3s;
}

.add-to-cart-btn:hover {
    background-color: #e91e63;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ—Ä–∑–∏–Ω—ã */
.cart-icon {
    position: fixed;
    bottom: 30px;
    right: 30px;
    background-color: #ffb6c1;
    color: white;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    cursor: pointer;
    box-shadow: 0 3px 10px rgba(0,0,0,0.2);
    z-index: 99;
}

.cart-count {
    position: absolute;
    top: -5px;
    right: -5px;
    background-color: #e91e63;
    color: white;
    width: 25px;
    height: 25px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
}

.cart-items {
    max-height: 400px;
    overflow-y: auto;
    margin-bottom: 20px;
}

.cart-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px solid #eee;
}

.cart-item-info {
    flex: 1;
}

.cart-item-title {
    font-weight: bold;
    margin-bottom: 5px;
}

.cart-item-price {
    color: #e91e63;
}

.cart-item-actions {
    display: flex;
    align-items: center;
    gap: 10px;
}

.cart-item-quantity {
    width: 50px;
    text-align: center;
    padding: 5px;
    border: 1px solid #ddd;
    border-radius: 4px;
}

.remove-cart-item {
    background: none;
    border: none;
    color: #e91e63;
    cursor: pointer;
    font-size: 18px;
}

.cart-total {
    display: flex;
    justify-content: space-between;
    font-size: 18px;
    font-weight: bold;
    padding: 15px 0;
    border-top: 2px solid #eee;
}

.checkout-btn {
    width: 100%;
    padding: 14px;
    background-color: #ffb6c1;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
}

.checkout-btn:hover {
    background-color: #e91e63;
}
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–∫–∞–∑–æ–≤ */
.order-card {
    background: white;
    border-radius: 10px;
    padding: 15px;
    margin-bottom: 15px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.order-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
    padding-bottom: 10px;
    border-bottom: 1px solid #eee;
}

.order-id {
    font-weight: bold;
    color: #e91e63;
}

.order-date {
    color: #666;
}

.order-status {
    padding: 3px 10px;
    border-radius: 15px;
    font-size: 12px;
    font-weight: bold;
    background-color: #f0f0f0;
}

.order-status.processing {
    background-color: #fff3e0;
    color: #ff9800;
}

.order-status.shipped {
    background-color: #e3f2fd;
    color: #2196f3;
}

.order-status.delivered {
    background-color: #e8f5e9;
    color: #4caf50;
}

.order-status.cancelled {
    background-color: #ffebee;
    color: #f44336;
}

.order-total {
    font-weight: bold;
    text-align: right;
    margin-top: 10px;
}

.order-items {
    margin-top: 10px;
}

.order-item {
    display: flex;
    justify-content: space-between;
    padding: 5px 0;
    border-bottom: 1px dashed #eee;
}

.order-item:last-child {
    border-bottom: none;
}

.order-item-name {
    flex: 1;
}

.order-item-quantity {
    width: 50px;
    text-align: center;
}

.order-item-price {
    width: 100px;
    text-align: right;
}

textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    font-size: 15px;
    resize: vertical;
}
        .profile-actions {
    margin-top: 20px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

#deleteAccountBtn {
    background-color: #ffebee;
    color: #f44336;
    border: 1px solid #f44336;
}

#deleteAccountBtn:hover {
    background-color: #f44336;
    color: white;
}
.profile-actions {
    margin-top: 20px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

#viewOrdersBtn {
    background-color: #e3f2fd;
    color: #2196f3;
    border: 1px solid #2196f3;
}

#viewOrdersBtn:hover {
    background-color: #2196f3;
    color: white;
}

#deleteAccountBtn {
    background-color: #ffebee;
    color: #f44336;
    border: 1px solid #f44336;
}

#deleteAccountBtn:hover {
    background-color: #f44336;
    color: white;
}

        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ */
.search-container {
    display: flex;
    flex: 1;
    margin-right: 15px;
    position: relative;
}

.search-input {
    flex: 1;
    padding: 12px 20px;
    border: 1px solid #e0e0e0;
    border-radius: 25px;
    font-size: 16px;
    outline: none;
    transition: all 0.3s;
    padding-right: 80px; /* –û—Å—Ç–∞–≤–ª—è–µ–º –º–µ—Å—Ç–æ –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
}

.search-input:focus {
    border-color: #ffb6c1;
    box-shadow: 0 0 0 3px rgba(255, 182, 193, 0.2);
}

.search-btn {
    position: absolute;
    right: 40px;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    cursor: pointer;
    font-size: 18px;
    color: #666;
    padding: 5px;
}

#searchBtn {
    padding: 12px 20px;
    background-color: #ffb6c1;
    color: white;
    border: none;
    border-radius: 25px; /* –ó–∞–∫—Ä—É–≥–ª—è–µ–º */
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
}

#searchBtn:hover {
    background-color: #e91e63;
}

.clear-search-btn {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 18px;
    color: #e91e63;
    cursor: pointer;
    padding: 5px;
    display: block !important; /* –¢–µ–ø–µ—Ä—å –≤—Å–µ–≥–¥–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è */
}
.clear-search-btn:hover {
    color: #e91e63;
}
        .top-category-horizontal.active {
    background-color: #e91e63;
    color: white;
    border-color: #e91e63;
}

        /* –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ */
        .filter-btn-container {
            display: flex;
            justify-content: flex-start;
            margin: 20px 0;
        }



        .filters-panel {
            display: none;
            background-color: #fff5f7;
            padding: 20px;
            border-radius: 10px;
            margin: 20px auto;
            max-width: 500px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            animation: fadeIn 0.3s ease-out;
        }

        .filters-panel.active {
            display: block;
        }

        .filter-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .filter-group {
            flex: 1;
        }

        .filter-group label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: 500;
        }

        .filter-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            font-size: 14px;
        }

        .filter-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .filter-action-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        #applyFilters {
            background-color: #ffb6c1;
            color: white;
        }

        #applyFilters:hover {
            background-color: #e91e63;
        }

        #resetFilters {
            background-color: #f0f0f0;
            color: #555;
        }

        #resetFilters:hover {
            background-color: #e0e0e0;
        }

#toggleFiltersBtn {
    padding: 12px 25px;
    background-color: #ffb6c1;
    color: white;
    border: none;
    border-radius: 25px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 3px 10px rgba(255, 182, 193, 0.4);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    margin-left: 0;

}

#toggleFiltersBtn:hover {
    background-color: #e91e63;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(233, 30, 99, 0.3);
}

#toggleFiltersBtn svg {
    width: 18px;
    height: 18px;
}
        .profile-actions {
    margin-top: 20px;
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.profile-actions .submit-btn {
    width: 100%;
    padding: 14px;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    text-align: center;
}

#viewOrdersBtn {
    background-color: #e3f2fd;
    color: #2196f3;
}

#viewOrdersBtn:hover {
    background-color: #2196f3;
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
}

#deleteAccountBtn {
    background-color: #ffebee;
    color: #f44336;
}

#deleteAccountBtn:hover {
    background-color: #f44336;
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(244, 67, 54, 0.3);
}

        /* –°—Ç–∏–ª–∏ –¥–ª—è —á–∞—Ç–∞ */
.chat-message {
    max-width: 70%;
    padding: 10px 15px;
    margin-bottom: 10px;
    border-radius: 15px;
    word-wrap: break-word;
}

.user-message {
    background-color: #e1f5fe;
    margin-left: auto;
    border-bottom-right-radius: 0;
}

.admin-message {
    background-color: #f0f0f0;
    margin-right: auto;
    border-bottom-left-radius: 0;
}

.message-sender {
    font-weight: bold;
    font-size: 12px;
    margin-bottom: 5px;
}

.message-time {
    font-size: 10px;
    color: #666;
    text-align: right;
    margin-top: 5px;
}

#chatContainer {
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding: 15px;
    height: 400px;
    overflow-y: auto;
    background-color: #f9f9f9;
    border-radius: 8px;
    margin-bottom: 15px;
}

#chatMessageInput {
    flex-grow: 1;
    padding: 10px 15px;
    border: 1px solid #ddd;
    border-radius: 20px;
    outline: none;
}

#sendChatMessageBtn {
    padding: 10px 20px;
    background-color: #ffb6c1;
    color: white;
    border: none;
    border-radius: 20px;
    cursor: pointer;
    transition: background-color 0.3s;
}

#sendChatMessageBtn:hover {
    background-color: #e91e63;
}

/* –î–ª—è –∞–¥–º–∏–Ω–∫–∏ */
.admin-chat-list {
    max-height: 500px;
    overflow-y: auto;
    border-right: 1px solid #eee;
}

.chat-room-item:hover {
    background-color: #f5f5f5 !important;
}

        /* –î–æ–±–∞–≤–ª—è–µ–º –≤ —Å–µ–∫—Ü–∏—é —Å—Ç–∏–ª–µ–π */
    .details-btn {
        width: 100%;
        padding: 10px;
        background-color: #f0f0f0;
        color: #333;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s;
        margin-top: 8px;
    }

    .details-btn:hover {
        background-color: #e0e0e0;
    }

    /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ç–æ–≤–∞—Ä–∞ */
    .product-modal-content {
        max-width: 600px;
        padding: 30px;
    }

    .product-modal-image {
        width: 100%;
        height: 300px;
        background-color: #f5f5f5;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 80px;
        margin-bottom: 20px;
        border-radius: 10px;
    }

    .product-modal-title {
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 10px;
        color: #e91e63;
    }

    .product-modal-price {
        font-size: 22px;
        font-weight: bold;
        color: #e91e63;
        margin-bottom: 15px;
    }

    .product-modal-category {
        font-size: 16px;
        color: #666;
        margin-bottom: 15px;
    }

    .product-modal-description {
        margin-bottom: 20px;
        line-height: 1.6;
    }

    .product-modal-stock {
        font-weight: bold;
        margin-bottom: 20px;
    }

    .product-modal-actions {
        display: flex;
        gap: 10px;
    }


    /* –û–±–Ω–æ–≤–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∏–ª–∏ –¥–ª—è product-image */
    .product-image {
        height: 200px;
        background-color: #f5f5f5;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
    }

    .product-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .product-image-placeholder {
        font-size: 50px;
        color: #ccc;
    }

    </style>
</head>
<body>
    <!-- –®–∞–ø–∫–∞ -->
    <header class="header">
        <h1>Cosmetic Shop</h1>
        <!-- –ö–Ω–æ–ø–∫–∞ –≤—Ö–æ–¥–∞ (—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏) -->
        <button class="auth-btn">–í–æ–π—Ç–∏</button>
        <!-- –ë–ª–æ–∫ –ø—Ä–æ—Ñ–∏–ª—è (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏) -->
        <div class="profile-container" style="display: none;">
            <div class="profile-icon"></div>
            <button class="logout-btn">–í—ã–π—Ç–∏</button>
        </div>
    </header>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>

            <div class="tab-container">
                <div class="tab active" data-tab="login">–í—Ö–æ–¥</div>
                <div class="tab" data-tab="register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</div>
            </div>

            <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
            <form id="loginForm" class="auth-form active" action="/login" method="POST">
                <h2>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>

                <div class="form-group">
                    <label for="username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
                    <input type="text" id="username" name="username" required>
                </div>

                <div class="form-group">
                    <label for="password">–ü–∞—Ä–æ–ª—å:</label>
                    <input type="password" id="password" name="password" required>
                </div>

                <div class="remember-group">
                    <input type="checkbox" id="remember" name="remember" class="remember-checkbox">
                    <label for="remember">–ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è</label>
                </div>

                <div class="form-actions">
                    <button type="submit" class="submit-btn">–í–æ–π—Ç–∏</button>
                </div>

                <div class="auth-footer">
                    <p>–ï—â—ë –Ω–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="#" class="switch-to-register">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</a></p>
                </div>
            </form>

            <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->

            <form id="registerForm" class="auth-form" action="/register" method="POST">
    <h2>–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</h2>

    <div class="form-group">
        <label for="first_name">–ò–º—è*</label>
        <input type="text" id="first_name" name="first_name" required>
    </div>

    <div class="form-group">
        <label for="last_name">–§–∞–º–∏–ª–∏—è*</label>
        <input type="text" id="last_name" name="last_name" required>
    </div>

    <div class="form-group">
        <label for="email">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞*</label>
        <input type="email" id="email" name="email" required>
    </div>

    <div class="form-group">
        <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
        <input type="tel" id="phone" name="phone">
    </div>

    <div class="form-group">
        <label for="address">–ê–¥—Ä–µ—Å</label>
        <input type="text" id="address" name="address">
    </div>

    <div class="form-group">
        <label for="reg_username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è*</label>
        <input type="text" id="reg_username" name="username" required>
    </div>

    <div class="form-group">
        <label for="reg_password">–ü–∞—Ä–æ–ª—å*</label>
        <input type="password" id="reg_password" name="password" required>
    </div>

    <div class="form-group">
        <label for="confirm_password">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å*</label>
        <input type="password" id="confirm_password" name="confirm_password" required>
    </div>

    <div class="form-actions">
        <button type="submit" class="submit-btn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
    </div>

    <div class="auth-footer">
        <p>–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="#" class="switch-to-login">–í–æ–π—Ç–∏</a></p>
    </div>
</form>

        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫ -->
    <div class="main-content-header">
        <!-- –í–µ—Ä—Ö–Ω—è—è —Å—Ç—Ä–æ–∫–∞ - –ø–æ–∏—Å–∫ –∏ –∫–∞—Ç–∞–ª–æ–≥ -->
        <div class="search-row">
    <button class="catalog-btn">–ö–∞—Ç–∞–ª–æ–≥</button>

    <div class="search-container">
        <input type="text" class="search-input" id="userSearchInput" placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤...">
        <span id="clearSearch" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%);
              cursor: pointer; color: #888; font-size: 18px; display: none;">&times;</span>
    </div>
    <button id="searchBtn" class="admin-btn" style="margin-left: 10px;">–ü–æ–∏—Å–∫</button>

    </div>
</div>


        <!-- –°—Ç—Ä–æ–∫–∞ —Å —Ç–æ–ø-–∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ -->
        <div class="top-categories-title">–¢–æ–ø –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</div>
        <div class="top-categories-row">
            <div class="top-categories-horizontal">
                <div class="top-category-horizontal">–î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –∫–æ—Å–º–µ—Ç–∏–∫–∞</div>
                <div class="top-category-horizontal">–°—ã–≤–æ—Ä–æ—Ç–∫–∏</div>
                <div class="top-category-horizontal">–¢–æ–Ω–∏–∫–∏/–ª–æ—Å—å–æ–Ω—ã</div>
                <div class="top-category-horizontal">–ö—Ä–µ–º—ã</div>
                <div class="top-category-horizontal">–®–∞–º–ø—É–Ω–∏</div>
                <div class="top-category-horizontal">–ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä—ã</div>
                <div class="top-category-horizontal">–ö—Ä–µ–º—ã –¥–ª—è –≤–µ–∫</div>
                <div class="top-category-horizontal">–ü–µ–Ω–∫–∏/–≥–µ–ª–∏</div>
                <div class="top-category-horizontal">–¢–∫–∞–Ω–µ–≤—ã–µ –º–∞—Å–∫–∏</div>
                <div class="top-category-horizontal">–ú–∞—Å—Å–∞–∂–µ—Ä—ã</div>
                <div class="top-category-horizontal">–ü–∞—Ç—á–∏ –¥–ª—è –≥–ª–∞–∑</div>
            </div>
        </div>
    </div>
    <!-- –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç –±–ª–æ–∫ –ø–µ—Ä–µ–¥ products-container -->
<!-- –ë–ª–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ -->
<div class="products-container">
    <div class="products-header">
        <h2 class="section-title">–ù–∞—à–∏ —Ç–æ–≤–∞—Ä—ã</h2>
        <button id="toggleFiltersBtn" class="filter-toggle-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                <path d="M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/>
            </svg>
            –§–∏–ª—å—Ç—Ä—ã
        </button>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤ (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç–∞) -->
<div class="filters-panel" id="filtersPanel">
    <h3>–§–∏–ª—å—Ç—Ä—ã —Ç–æ–≤–∞—Ä–æ–≤</h3>
    <div class="filter-row">
        <div class="filter-group">
            <label for="priceMin">–¶–µ–Ω–∞ –æ—Ç (BYN)</label>
            <input type="number" id="priceMin" placeholder="–º–∏–Ω. —Ü–µ–Ω–∞" min="0" step="0.01">
        </div>
        <div class="filter-group">
            <label for="priceMax">–¶–µ–Ω–∞ –¥–æ (BYN)</label>
            <input type="number" id="priceMax" placeholder="–º–∞–∫—Å. —Ü–µ–Ω–∞" min="0" step="0.01">
        </div>
    </div>
    <!-- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –∑–¥–µ—Å—å -->

    <div class="filter-actions">
        <button id="applyFilters" class="filter-action-btn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
        <button id="resetFilters" class="filter-action-btn">–°–±—Ä–æ—Å–∏—Ç—å</button>
    </div>
</div>

<!-- –î–æ–±–∞–≤—å—Ç–µ –≤ index.html –∏ admin.html -->
<div id="chatModal" class="modal">
    <div class="modal-content" style="max-width: 600px;">
        <span class="close-btn">&times;</span>
        <h2>–ß–∞—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π</h2>

        <div id="chatContainer" style="height: 400px; overflow-y: auto; margin-bottom: 15px; border: 1px solid #eee; padding: 10px; border-radius: 5px;">
            <!-- –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
        </div>

        <div style="display: flex;">
            <input type="text" id="chatMessageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." style="flex-grow: 1; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
            <button id="sendChatMessageBtn" style="margin-left: 10px; padding: 10px 15px; background-color: #ffb6c1; color: white; border: none; border-radius: 4px; cursor: pointer;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </div>
    </div>
</div>

<!-- –î–ª—è –∫–ª–∏–µ–Ω—Ç–∞ –¥–æ–±–∞–≤—å—Ç–µ –∫–Ω–æ–ø–∫—É —á–∞—Ç–∞ —Ä—è–¥–æ–º —Å –∫–æ—Ä–∑–∏–Ω–æ–π -->
<div class="chat-icon" id="chatIcon" style="position: fixed; bottom: 100px; right: 30px; background-color: #4CAF50; color: white; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; cursor: pointer; box-shadow: 0 3px 10px rgba(0,0,0,0.2); z-index: 99;">
    üí¨
</div>

</div>
    <div class="products-grid" id="productsGrid"></div>
</div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–æ—Ä–∑–∏–Ω—ã -->
    <div id="cartModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <span class="close-btn">&times;</span>
            <h2>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h2>
            <div class="cart-items" id="cartItems">
                <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å—é–¥–∞ -->
            </div>
            <div class="cart-total">
                <span>–ò—Ç–æ–≥–æ:</span>
                <span id="cartTotal">0 BYN</span>
            </div>
            <button class="checkout-btn">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
        </div>
    </div>
<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ -->
<div id="checkoutModal" class="modal">
    <div class="modal-content" style="max-width: 500px;">
        <span class="close-btn">&times;</span>
        <h2>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
        <form id="checkoutForm">
            <div class="form-group">
                <label for="checkoutAddress">–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</label>
                <input type="text" id="checkoutAddress" required>
            </div>
            <div class="form-group">
                <label for="checkoutPhone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                <input type="tel" id="checkoutPhone" required>
            </div>
            <div class="form-group">
                <label for="checkoutComment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É</label>
                <textarea id="checkoutComment" rows="3"></textarea>
            </div>
            <button type="submit" class="submit-btn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
        </form>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–∫–∞–∑–æ–≤ -->
<div id="ordersModal" class="modal">
    <div class="modal-content" style="max-width: 800px;">
        <span class="close-btn">&times;</span>
        <h2>–ú–æ–∏ –∑–∞–∫–∞–∑—ã</h2>
        <div id="ordersList">
            <!-- –ó–∞–∫–∞–∑—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
        </div>
    </div>
</div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ç–æ–≤–∞—Ä–∞ -->
<div id="productModal" class="modal">
    <div class="modal-content product-modal-content">
        <span class="close-btn">&times;</span>
        <div class="product-modal-image" id="productModalImage"></div>
        <h2 class="product-modal-title" id="productModalTitle"></h2>
        <div class="product-modal-price" id="productModalPrice"></div>
        <div class="product-modal-category" id="productModalCategory"></div>
        <div class="product-modal-description" id="productModalDescription"></div>
        <div class="product-modal-stock" id="productModalStock"></div>
        <div class="product-modal-actions">
            <button class="add-to-cart-btn" id="modalAddToCartBtn">–í –∫–æ—Ä–∑–∏–Ω—É</button>
        </div>
    </div>
</div>

    <!-- –ò–∫–æ–Ω–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã -->
    <div class="cart-icon" id="cartIcon">
        üõí <span class="cart-count">0</span>
    </div>

   <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Ñ–∏–ª—è -->
<div id="profileModal" class="modal">
    <div class="modal-content" style="max-width: 500px;">
        <span class="close-btn">&times;</span>
        <h2>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>

        <form id="profileForm">
            <div class="form-group">
                <label for="profileFirstName">–ò–º—è*</label>
                <input type="text" id="profileFirstName" required>
            </div>

            <div class="form-group">
                <label for="profileLastName">–§–∞–º–∏–ª–∏—è*</label>
                <input type="text" id="profileLastName" required>
            </div>

            <div class="form-group">
                <label for="profileEmail">Email*</label>
                <input type="email" id="profileEmail" required>
            </div>

            <div class="form-group">
                <label for="profilePhone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                <input type="tel" id="profilePhone">
            </div>

            <div class="form-group">
                <label for="profileAddress">–ê–¥—Ä–µ—Å</label>
                <input type="text" id="profileAddress">
            </div>

            <div class="form-group">
                <label for="profileUsername">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è*</label>
                <input type="text" id="profileUsername" required>
            </div>

            <div class="form-group">
                <label for="profilePassword">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –º–µ–Ω—è—Ç—å)</label>
                <input type="password" id="profilePassword">
            </div>

            <div class="form-group">
                <label for="profileConfirmPassword">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                <input type="password" id="profileConfirmPassword">
            </div>

            <div class="form-actions">
                <button type="submit" class="submit-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            </div>
        </form>

        <div class="profile-actions">
    <button id="viewOrdersBtn" class="submit-btn" style="margin-top: 10px; background-color: #e3f2fd; color: #2196f3; border: none;">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</button>
    <button id="deleteAccountBtn" class="submit-btn" style="margin-top: 10px; background-color: #ffebee; color: #f44336; border: none;">–£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
</div>
    </div>
</div>
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="content">
        <!-- –ó–¥–µ—Å—å –º–æ–∂–Ω–æ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
    </div>

    <script>

function formatDateBY(dateString) {
    const date = new Date(dateString);

    // –î–æ–±–∞–≤–ª—è–µ–º 3 —á–∞—Å–∞ –¥–ª—è –ú–∏–Ω—Å–∫–∞ (UTC+3)
    date.setHours(date.getHours() + 3);

    const options = {
        day: '2-digit',
        month: '2-digit',
        year: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
    };

    return date.toLocaleString('ru-RU', options).replace(',', '');
}

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const authBtn = document.querySelector('.auth-btn');
        const profileContainer = document.querySelector('.profile-container');
        const logoutBtn = document.querySelector('.logout-btn');
        const modal = document.getElementById('authModal');
        const closeBtn = document.querySelector('.close-btn');
        const tabs = document.querySelectorAll('.tab');
        const forms = document.querySelectorAll('.auth-form');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const switchToRegisterLinks = document.querySelectorAll('.switch-to-register');
        const switchToLoginLinks = document.querySelectorAll('.switch-to-login');

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        authBtn.addEventListener('click', () => {
            modal.style.display = 'block';
            // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –≤—Ö–æ–¥–∞
            switchTab('login');
        });

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        closeBtn.addEventListener('click', () => {
            modal.style.display = 'none';
        });

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –æ–∫–Ω–∞
        window.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.style.display = 'none';
            }
        });

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                switchTab(tab.dataset.tab);
            });
        });

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –ø–æ —Å—Å—ã–ª–∫–µ
        switchToRegisterLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                switchTab('register');
            });
        });

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –≤—Ö–æ–¥ –ø–æ —Å—Å—ã–ª–∫–µ
        switchToLoginLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                switchTab('login');
            });
        });

        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫
        function switchTab(tabName) {
            tabs.forEach(t => t.classList.remove('active'));
            forms.forEach(f => f.classList.remove('active'));

            document.querySelector(`.tab[data-tab="${tabName}"]`).classList.add('active');
            document.getElementById(`${tabName}Form`).classList.add('active');
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞
        // –û–±–Ω–æ–≤–∏—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞
// –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞
loginForm.addEventListener('submit', async (e) => {
    e.preventDefault();

    try {
        const formData = {
            username: document.getElementById('username').value,
            password: document.getElementById('password').value,
            remember: document.getElementById('remember').checked
        };

        const response = await fetch('/login', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(formData)
        });

        if (!response.ok) {
            throw new Error('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏');
        }

        const result = await response.json();

        if (result.success) {
    modal.style.display = 'none';
    authBtn.style.display = 'none';
    profileContainer.style.display = 'flex';

    // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –≤ –∞–¥–º–∏–Ω–∫—É, –µ—Å–ª–∏ —ç—Ç–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
    if (result.is_admin) {
        window.location.href = '/admin';
    } else {
        window.location.reload();
    }
}
 else {
            alert(result.message || '–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞');
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞:', error);
        alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ: ' + error.message);
    }
});

        registerForm.addEventListener('submit', async (e) => {
    e.preventDefault();

    const password = document.getElementById('reg_password').value;
    const confirmPassword = document.getElementById('confirm_password').value;

    if (password !== confirmPassword) {
        alert('–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç');
        return;
    }

    const formData = {
        username: document.getElementById('reg_username').value.trim(),
        first_name: document.getElementById('first_name').value.trim(),
        last_name: document.getElementById('last_name').value.trim(),
        email: document.getElementById('email').value.trim(),
        phone: document.getElementById('phone').value.trim(),
        address: document.getElementById('address').value.trim(),
        password: password
    };

    // –ü—Ä–æ—Å—Ç–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –ø—É—Å—Ç—ã–µ –ø–æ–ª—è
    if (!formData.username || !formData.email || !formData.first_name || !formData.last_name || !formData.password) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
        return;
    }

    try {
        const response = await fetch('/register', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(formData)
        });

        const result = await response.json();

        if (response.ok && result.success) {
            alert('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ!');
            modal.style.display = 'none';
            authBtn.style.display = 'none';
            profileContainer.style.display = 'flex';
            window.location.reload();
        } else {
            alert(result.message || '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏');
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞:', error);
        alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: ' + error.message);
    }
});


        // –í—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è
        logoutBtn.addEventListener('click', async () => {
            try {
                const response = await fetch('/logout', {
                    method: 'POST'
                });

                if (response.ok) {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –≤—Ö–æ–¥–∞
                    authBtn.style.display = 'block';
                    profileContainer.style.display = 'none';
                } else {
                    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ');
            }
        });

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –≤—Ö–æ–¥–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –≤—Ö–æ–¥–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
window.addEventListener('DOMContentLoaded', async () => {
    try {
        const response = await fetch('/check-auth');
        if (response.ok) {
            const result = await response.json();
            if (result.isAuthenticated) {
                authBtn.style.display = 'none';
                profileContainer.style.display = 'flex';

                // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω, –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
                if (result.is_admin) {
                    console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–ª—è–µ—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º');
                }
            }
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', error);
    }
});

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM –¥–ª—è –∫–æ—Ä–∑–∏–Ω—ã
const cartIcon = document.getElementById('cartIcon');
const cartModal = document.getElementById('cartModal');
const cartItemsContainer = document.getElementById('cartItems');
const cartTotalElement = document.getElementById('cartTotal');
const cartCountElement = document.querySelector('.cart-count');

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤
async function loadProducts() {
    try {
        // –£–¥–∞–ª—è–µ–º –∫–ª–∞—Å—Å active —É –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
        document.querySelectorAll('.top-category-horizontal').forEach(cat => {
            cat.classList.remove('active');
        });

        const response = await fetch('/api/products');
        const data = await response.json();

        if (data.success) {
            renderProducts(data.products);
            document.querySelector('.section-title').textContent = '–ù–∞—à–∏ —Ç–æ–≤–∞—Ä—ã';
        } else {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤:', data.error);
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞:', error);
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
async function showProductDetails(productId) {
    try {
        const response = await fetch(`/api/products/${productId}`);
        const data = await response.json();

        if (data.success && data.product) {
            const product = data.product;
            const modalImage = document.getElementById('productModalImage');

            // –û—á–∏—â–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            modalImage.innerHTML = '';

            // –ï—Å–ª–∏ –ø–æ–ª–µ image_url –≤–æ–∑–≤—Ä–∞—â–µ–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ; –∏–Ω–∞—á–µ ‚Äì placeholder
            if (product.image_url) {
                const img = document.createElement('img');
                img.src = product.image_url;
                img.alt = product.name;
                // –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä:
                img.style.maxWidth = "100%";
                img.style.maxHeight = "200px";
                img.style.objectFit = "contain";
                modalImage.appendChild(img);
            } else {
                const placeholder = document.createElement('div');
                placeholder.className = 'product-image-placeholder';
                placeholder.textContent = product.name.charAt(0);
                modalImage.appendChild(placeholder);
            }

            // –ó–∞–ø–æ–ª–Ω—è–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            document.getElementById('productModalTitle').textContent = product.name;
            document.getElementById('productModalPrice').textContent = `${product.price.toFixed(2)} BYN`;
            document.getElementById('productModalCategory').textContent = `–ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${product.category || '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏'}`;
            document.getElementById('productModalDescription').textContent = product.description || '–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç';
            document.getElementById('productModalStock').textContent = product.stock > 0
                ? `–í –Ω–∞–ª–∏—á–∏–∏: ${product.stock} —à—Ç.`
                : '–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏';

            document.getElementById('modalAddToCartBtn').setAttribute('data-product-id', product.id);
            document.getElementById('productModal').style.display = 'block';
        } else {
            alert('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–≤–∞—Ä–µ');
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞:', error);
        alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ç–æ–≤–∞—Ä–∞');
    }
}


// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ç–æ–≤–∞—Ä–∞
window.addEventListener('click', (e) => {
    if (e.target === document.getElementById('productModal')) {
        document.getElementById('productModal').style.display = 'none';
    }
});

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ç–æ–≤–∞—Ä–∞ –ø–æ –∫–Ω–æ–ø–∫–µ
document.querySelector('#productModal .close-btn').addEventListener('click', () => {
    document.getElementById('productModal').style.display = 'none';
});

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É
async function addToCart(productId) {
    try {
        const response = await fetch('/api/cart', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                product_id: parseInt(productId),
                quantity: 1
            })
        });

        if (!response.ok) {
            throw new Error('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É');
        }

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        showNotification('–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É');
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞:', error);
        alert('–ù–µ —É–¥–∞–ª–æ—Å—å –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É');
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ—Ä–∑–∏–Ω—ã
async function updateCart() {
    try {
        const response = await fetch('/api/cart');
        if (!response.ok) return;

        const data = await response.json();

        if (data.success) {
            renderCart(data.cart);
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ—Ä–∑–∏–Ω—ã:', error);
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ—Ä–∑–∏–Ω—ã
function renderCart(cartItems) {
    cartItemsContainer.innerHTML = '';

    let total = 0;
    let itemCount = 0;

    if (cartItems.length === 0) {
        cartItemsContainer.innerHTML = '<p>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>';
    } else {
        cartItems.forEach(item => {
            const itemElement = document.createElement('div');
            itemElement.className = 'cart-item';
            itemElement.innerHTML = `
                <div class="cart-item-info">
                    <div class="cart-item-title">${item.product.name}</div>
                    <div class="cart-item-price">${item.product.price.toFixed(2)} BYN √ó ${item.quantity}</div>
                </div>
                <div class="cart-item-actions">
                    <input type="number" min="1" value="${item.quantity}" class="cart-item-quantity"
                           data-item-id="${item.id}">
                    <button class="remove-cart-item" data-item-id="${item.id}">√ó</button>
                </div>
            `;
            cartItemsContainer.appendChild(itemElement);

            total += item.product.price * item.quantity;
            itemCount += item.quantity;
        });
    }

    cartTotalElement.textContent = `${total.toFixed(2)} BYN`;
    cartCountElement.textContent = itemCount;

    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
    document.querySelectorAll('.cart-item-quantity').forEach(input => {
        input.addEventListener('change', async (e) => {
            const itemId = e.target.getAttribute('data-item-id');
            const quantity = parseInt(e.target.value);

            if (quantity > 0) {
                await updateCartItem(itemId, quantity);
                await updateCart();
            }
        });
    });

    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
    document.querySelectorAll('.remove-cart-item').forEach(button => {
        button.addEventListener('click', async (e) => {
            const itemId = e.target.getAttribute('data-item-id');
            await deleteCartItem(itemId);
            await updateCart();
        });
    });
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω–µ
async function updateCartItem(itemId, quantity) {
    try {
        const response = await fetch(`/api/cart/${itemId}`, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                quantity: quantity
            })
        });

        if (!response.ok) {
            throw new Error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ—Ä–∑–∏–Ω—ã');
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞:', error);
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
async function deleteCartItem(itemId) {
    try {
        const response = await fetch(`/api/cart/${itemId}`, {
            method: 'DELETE'
        });

        if (!response.ok) {
            throw new Error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã');
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞:', error);
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
function showNotification(message) {
    const notification = document.createElement('div');
    notification.className = 'notification';
    notification.textContent = message;
    document.body.appendChild(notification);

    setTimeout(() => {
        notification.classList.add('fade-out');
        setTimeout(() => notification.remove(), 500);
    }, 2000);
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–æ—Ä–∑–∏–Ω—ã
cartIcon.addEventListener('click', () => {
    cartModal.style.display = 'block';
    updateCart();
});

document.querySelector('.close-btn', cartModal).addEventListener('click', () => {
    cartModal.style.display = 'none';
});

window.addEventListener('click', (e) => {
    if (e.target === cartModal) {
        cartModal.style.display = 'none';
    }
});

// –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–≤–∞—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', () => {
    loadProducts();

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∏ –æ–±–Ω–æ–≤–ª—è–µ–º –∫–æ—Ä–∑–∏–Ω—É
    if (document.querySelector('.profile-container').style.display === 'flex') {
        updateCart();
    }
});

// –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
const notificationStyles = document.createElement('style');
notificationStyles.textContent = `
.notification {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: #4CAF50;
    color: white;
    padding: 15px 25px;
    border-radius: 5px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.2);
    z-index: 1000;
    opacity: 1;
    transition: opacity 0.5s;
}

.notification.fade-out {
    opacity: 0;
}
`;
document.head.appendChild(notificationStyles);

        window.addEventListener('DOMContentLoaded', async () => {
    try {
        const response = await fetch('/check-auth');
        if (response.ok) {
            const result = await response.json();
            if (result.isAuthenticated) {
                authBtn.style.display = 'none';
                profileContainer.style.display = 'flex';

                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ—Ä–∑–∏–Ω—É –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                updateCart();

                // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω, –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
                if (result.is_admin) {
                    console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–ª—è–µ—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º');
                }
            }
        }

        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–≤–∞—Ä—ã
        loadProducts();
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', error);
    }
});



// –≠–ª–µ–º–µ–Ω—Ç—ã DOM –¥–ª—è –∑–∞–∫–∞–∑–æ–≤
const checkoutBtn = document.querySelector('.checkout-btn');
const checkoutModal = document.getElementById('checkoutModal');
const checkoutForm = document.getElementById('checkoutForm');
const ordersModal = document.getElementById('ordersModal');
const ordersList = document.getElementById('ordersList');
const profileIcon = document.querySelector('.profile-icon');

// –û—Ç–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
checkoutBtn.addEventListener('click', () => {
    cartModal.style.display = 'none';
    checkoutModal.style.display = 'block';

    // –ó–∞–ø–æ–ª–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
    fetch('/check-auth')
        .then(response => response.json())
        .then(data => {
            if (data.isAuthenticated && data.username) {
                document.getElementById('checkoutPhone').value = data.phone || '';
                document.getElementById('checkoutAddress').value = data.address || '';
            }
        });
});


// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
checkoutForm.addEventListener('submit', async (e) => {
    e.preventDefault();

    try {
        const response = await fetch('/api/orders', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                address: document.getElementById('checkoutAddress').value,
                phone: document.getElementById('checkoutPhone').value,
                comment: document.getElementById('checkoutComment').value
            })
        });

        const result = await response.json();

        if (result.success) {
            showNotification('–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω!');
            checkoutModal.style.display = 'none';
            await updateCart(); // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ—Ä–∑–∏–Ω—É (–æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—É—Å—Ç–∞)

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞
            await loadOrders();
            ordersModal.style.display = 'block';
        } else {
            alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞: ' + (result.error || ''));
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞:', error);
        alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞');
    }
});

// –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–∫–∞–∑–æ–≤
async function loadOrders() {
    try {
        const response = await fetch('/api/orders');
        const data = await response.json();

        if (data.success) {
            renderOrders(data.orders);
        } else {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–∫–∞–∑–æ–≤:', data.error);
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞:', error);
    }
}

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–∫–∞–∑–æ–≤
function renderOrders(orders) {
    ordersList.innerHTML = '';

    if (orders.length === 0) {
        ordersList.innerHTML = '<p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤</p>';
        return;
    }

    orders.forEach(order => {
        const orderCard = document.createElement('div');
        orderCard.className = 'order-card';

        const statusClass = order.status ? order.status.toLowerCase() : '';

        orderCard.innerHTML = `
            <div class="order-header">
                <div>
                    <span class="order-id">–ó–∞–∫–∞–∑</span>
                    <span class="order-date">${formatDateBY(order.created_at)}</span>
                </div>
                <span class="order-status ${statusClass}">${order.status || 'processing'}</span>
            </div>
            <div class="order-items">
                ${order.items.map(item => `
                    <div class="order-item">
                        <span class="order-item-name">${item.product_name}</span>
                        <span class="order-item-quantity">${item.quantity} —à—Ç.</span>
                        <span class="order-item-price">${item.price.toFixed(2)} BYN</span>
                    </div>
                `).join('')}
            </div>
            <div class="order-total">–ò—Ç–æ–≥–æ: ${order.total.toFixed(2)} BYN</div>
        `;

        ordersList.appendChild(orderCard);
    });
}



// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
document.querySelectorAll('.modal .close-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        this.closest('.modal').style.display = 'none';
    });
});

window.addEventListener('click', (e) => {
    if (e.target === checkoutModal) {
        checkoutModal.style.display = 'none';
    }
    if (e.target === ordersModal) {
        ordersModal.style.display = 'none';
    }
});

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è
const profileModal = document.getElementById('profileModal');
const profileForm = document.getElementById('profileForm');
const viewOrdersBtn = document.getElementById('viewOrdersBtn');
const deleteAccountBtn = document.getElementById('deleteAccountBtn');

// –û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∏–∫–æ–Ω–∫—É

// –û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∏–∫–æ–Ω–∫—É
profileIcon.addEventListener('click', async (e) => {
    e.stopPropagation();

    try {
        const response = await fetch('/api/user');
        if (response.ok) {
            const userData = await response.json();

            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            document.getElementById('profileFirstName').value = userData.first_name || '';
            document.getElementById('profileLastName').value = userData.last_name || '';
            document.getElementById('profileEmail').value = userData.email || '';
            document.getElementById('profilePhone').value = userData.phone || '';
            document.getElementById('profileAddress').value = userData.address || '';
            document.getElementById('profileUsername').value = userData.username || '';

            // –û—á–∏—â–∞–µ–º –ø–æ–ª—è –ø–∞—Ä–æ–ª–µ–π
            document.getElementById('profilePassword').value = '';
            document.getElementById('profileConfirmPassword').value = '';

            profileModal.style.display = 'block';
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:', error);
        alert('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è');
    }
});

// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
profileForm.addEventListener('submit', async (e) => {
    e.preventDefault();

    const password = document.getElementById('profilePassword').value;
    const confirmPassword = document.getElementById('profileConfirmPassword').value;

    if (password && password !== confirmPassword) {
        alert('–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç');
        return;
    }

    try {
        const updatedData = {
            first_name: document.getElementById('profileFirstName').value.trim(),
            last_name: document.getElementById('profileLastName').value.trim(),
            email: document.getElementById('profileEmail').value.trim(),
            phone: document.getElementById('profilePhone').value.trim(),
            address: document.getElementById('profileAddress').value.trim(),
            username: document.getElementById('profileUsername').value.trim(),
            password: password || undefined // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–∞—Ä–æ–ª—å –∏–∑–º–µ–Ω–µ–Ω
        };

        const response = await fetch('/api/user', {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(updatedData)
        });

        if (response.ok) {
            showNotification('–ü—Ä–æ—Ñ–∏–ª—å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω');
            profileModal.style.display = 'none';
        } else {
            const error = await response.json();
            alert(error.message || '–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è');
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞:', error);
        alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è');
    }
});

// –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–∫–∞–∑–æ–≤ —Ç–æ–ª—å–∫–æ –ø–æ –Ω–∞–∂–∞—Ç–∏—é –∫–Ω–æ–ø–∫–∏
viewOrdersBtn.addEventListener('click', async () => {
    profileModal.style.display = 'none';
    ordersModal.style.display = 'block';
    await loadOrders();
});


// –£–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞
deleteAccountBtn.addEventListener('click', async () => {
    if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')) {
        try {
            const response = await fetch('/api/user', {
                method: 'DELETE'
            });

            if (response.ok) {
                alert('–í–∞—à –∞–∫–∫–∞—É–Ω—Ç –±—ã–ª —É–¥–∞–ª–µ–Ω. –í—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
                window.location.href = '/';
            } else {
                const error = await response.json();
                alert(error.message || '–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞');
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞:', error);
            alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞');
        }
    }
});

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–æ—Ñ–∏–ª—è
document.querySelector('#profileModal .close-btn').addEventListener('click', () => {
    profileModal.style.display = 'none';
});

window.addEventListener('click', (e) => {
    if (e.target === profileModal) {
        profileModal.style.display = 'none';
    }
});

        // –≠–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –ø–æ–∏—Å–∫–∞
const searchInput = document.getElementById('userSearchInput');
const searchBtn = document.getElementById('searchBtn');
const clearSearchBtn = document.getElementById('clearSearch');

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞
async function performSearch() {
    const searchTerm = searchInput.value.trim();

    try {
        const response = await fetch(`/api/products/search?q=${encodeURIComponent(searchTerm)}`);
        const data = await response.json();

        if (data.success) {
            renderProducts(data.products);
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞:', error);
    }
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
searchBtn.addEventListener('click', performSearch);

searchInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
        performSearch();
    }
});

clearSearchBtn.addEventListener('click', () => {
    searchInput.value = '';
    clearSearchBtn.style.display = 'none';
    loadProducts(); // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ —Ç–æ–≤–∞—Ä—ã —Å–Ω–æ–≤–∞
});

// –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞
searchInput.addEventListener('input', () => {
    if (searchInput.value.trim() !== '') {
        clearSearchBtn.style.display = 'block';
    } else {
        clearSearchBtn.style.display = 'none';
    }
});

// –û–±–Ω–æ–≤–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é renderProducts –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—É—Å—Ç—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
function renderProducts(products) {
    const productsGrid = document.getElementById('productsGrid');
    productsGrid.innerHTML = '';

    if (products.length === 0) {
        productsGrid.innerHTML = '<p style="grid-column: 1/-1; text-align: center;">–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>';
        return;
    }

    products.forEach(product => {
        const productCard = document.createElement('div');
        productCard.className = 'product-card';
const imageContent = product.image_url
    ? `<img src="${product.image_url}" alt="${product.name}" style="max-width:100%; max-height:200px; object-fit: contain;">`
    : `<div class="product-image-placeholder">${product.name.charAt(0)}</div>`;

        productCard.innerHTML = `
            <div class="product-image">
                ${imageContent}
            </div>
            <div class="product-info">
                <h3 class="product-title">${product.name}</h3>
                <div class="product-price">${product.price.toFixed(2)} BYN</div>
                <button class="add-to-cart-btn" data-product-id="${product.id}">–í –∫–æ—Ä–∑–∏–Ω—É</button>
                <button class="details-btn" data-product-id="${product.id}">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
            </div>
        `;
        productsGrid.appendChild(productCard);
    });

    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ "–í –∫–æ—Ä–∑–∏–Ω—É"
    document.querySelectorAll('.add-to-cart-btn').forEach(button => {
        button.addEventListener('click', async (e) => {
            const productId = e.target.getAttribute('data-product-id');
            await addToCart(productId);
            await updateCart();
        });
    });

    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ "–ü–æ–¥—Ä–æ–±–Ω–µ–µ"
    document.querySelectorAll('.details-btn').forEach(button => {
        button.addEventListener('click', (e) => {
            const productId = e.target.getAttribute('data-product-id');
            showProductDetails(productId);
        });
    });
}
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
async function loadProductsByCategory(categoryName) {
    try {
        // –£–¥–∞–ª—è–µ–º –∫–ª–∞—Å—Å active —É –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
        document.querySelectorAll('.top-category-horizontal').forEach(cat => {
            cat.classList.remove('active');
        });

        // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å active –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        const categories = document.querySelectorAll('.top-category-horizontal');
        for (const cat of categories) {
            if (cat.textContent.trim() === categoryName) {
                cat.classList.add('active');
                break;
            }
        }

        const response = await fetch(`/api/products/category/${encodeURIComponent(categoryName)}`);
        const data = await response.json();

        if (data.success) {
            renderProducts(data.products);
            document.querySelector('.section-title').textContent = `–¢–æ–≤–∞—Ä—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: ${categoryName}`;
        } else {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤:', data.error);
            renderProducts([]);
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞:', error);
        renderProducts([]);
    }
}


// –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
document.addEventListener('DOMContentLoaded', () => {
    // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    loadProducts();

    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
    document.querySelectorAll('.top-category-horizontal').forEach(category => {
        category.addEventListener('click', () => {
            const categoryName = category.textContent.trim();
            loadProductsByCategory(categoryName);
        });
    });

    // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"
    const showAllButton = document.createElement('button');
    showAllButton.className = 'top-category-horizontal';
    showAllButton.textContent = '–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ';
    showAllButton.style.marginLeft = '10px';
    showAllButton.addEventListener('click', () => {
        loadProducts();
        document.querySelector('.section-title').textContent = '–ù–∞—à–∏ —Ç–æ–≤–∞—Ä—ã';
    });

    // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–π
    document.querySelector('.top-categories-horizontal').appendChild(showAllButton);
});

       // –≠–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
        const toggleFiltersBtn = document.getElementById('toggleFiltersBtn');
        const filtersPanel = document.getElementById('filtersPanel');
        const applyFiltersBtn = document.getElementById('applyFilters');
        const resetFiltersBtn = document.getElementById('resetFilters');
        const priceMinInput = document.getElementById('priceMin');
        const priceMaxInput = document.getElementById('priceMax');

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø–∞–Ω–µ–ª–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
        toggleFiltersBtn.addEventListener('click', () => {
            filtersPanel.classList.toggle('active');

            // –ê–Ω–∏–º–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏
            if (filtersPanel.classList.contains('active')) {
                toggleFiltersBtn.textContent = '–°–∫—Ä—ã—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã';
                toggleFiltersBtn.style.backgroundColor = '#e91e63';
            } else {
                toggleFiltersBtn.textContent = '–§–∏–ª—å—Ç—Ä—ã';
                toggleFiltersBtn.style.backgroundColor = '#ffb6c1';
            }
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
        async function loadProductsWithFilters() {
            try {
                const minPrice = priceMinInput.value;
                const maxPrice = priceMaxInput.value;

                // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ü–µ–Ω
                if (minPrice && maxPrice && parseFloat(minPrice) > parseFloat(maxPrice)) {
                    alert('–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π');
                    return;
                }

                // –°—Ç—Ä–æ–∏–º URL —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
                let url = '/api/products/filtered?';
                const params = [];

                if (minPrice) params.push(`min_price=${minPrice}`);
                if (maxPrice) params.push(`max_price=${maxPrice}`);

                url += params.join('&');

                const response = await fetch(url);
                const data = await response.json();

                if (data.success) {
                    renderProducts(data.products);
                    filtersPanel.classList.remove('active');
                    toggleFiltersBtn.textContent = '–§–∏–ª—å—Ç—Ä—ã';
                    toggleFiltersBtn.style.backgroundColor = '#ffb6c1';
                } else {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤:', data.error);
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
            }
        }

        // –°–±—Ä–æ—Å —Ñ–∏–ª—å—Ç—Ä–æ–≤
        function resetFilters() {
            priceMinInput.value = '';
            priceMaxInput.value = '';
            loadProducts();
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ —Ñ–∏–ª—å—Ç—Ä–æ–≤
        applyFiltersBtn.addEventListener('click', loadProductsWithFilters);
        resetFiltersBtn.addEventListener('click', resetFilters);

        // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä—ã –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ Enter –≤ –ø–æ–ª—è—Ö –≤–≤–æ–¥–∞
        priceMinInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') loadProductsWithFilters();
        });

        priceMaxInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') loadProductsWithFilters();
        });

        document.querySelector('.catalog-btn').addEventListener('click', (e) => {
    e.preventDefault();

    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–∏—Å–∫
    searchInput.value = '';
    clearSearchBtn.style.display = 'none';

    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–∏–ª—å—Ç—Ä—ã
    priceMinInput.value = '';
    priceMaxInput.value = '';

    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
    document.querySelectorAll('.top-category-horizontal').forEach(cat => {
        cat.classList.remove('active');
    });

    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤, –µ—Å–ª–∏ –æ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∞
    if (filtersPanel.classList.contains('active')) {
        filtersPanel.classList.remove('active');
        toggleFiltersBtn.textContent = '–§–∏–ª—å—Ç—Ä—ã';
        toggleFiltersBtn.style.backgroundColor = '#ffb6c1';
    }

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –∑–∞–Ω–æ–≤–æ
    loadProducts();

    // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫ —Ç–æ–≤–∞—Ä–∞–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    document.querySelector('.products-container').scrollIntoView({ behavior: 'smooth' });

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    showNotification('–ö–∞—Ç–∞–ª–æ–≥ –æ–±–Ω–æ–≤–ª–µ–Ω');
});

// –î–æ–±–∞–≤—å—Ç–µ –≤ client.js
const chatIcon = document.getElementById('chatIcon');
const chatModal = document.getElementById('chatModal');
const chatContainer = document.getElementById('chatContainer');
const chatMessageInput = document.getElementById('chatMessageInput');
const sendChatMessageBtn = document.getElementById('sendChatMessageBtn');

let currentChatRoomId = null;

// –û—Ç–∫—Ä—ã—Ç–∏–µ —á–∞—Ç–∞
chatIcon.addEventListener('click', async () => {
    try {
        // –°–æ–∑–¥–∞–µ–º –∏–ª–∏ –ø–æ–ª—É—á–∞–µ–º —á–∞—Ç
        const response = await fetch('/api/chat/rooms', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            }
        });

        const result = await response.json();

        if (result.success) {
            currentChatRoomId = result.room_id;
            loadChatMessages();
            chatModal.style.display = 'block';

            // –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ —á–µ—Ä–µ–∑ SocketIO
            socket.emit('join_room', { room_id: currentChatRoomId });
        } else {
            alert(result.error || '–û—à–∏–±–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è —á–∞—Ç–∞');
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞:', error);

    }
});

// –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
async function loadChatMessages() {
    if (!currentChatRoomId) return;

    try {
        const response = await fetch(`/api/chat/rooms/${currentChatRoomId}/messages`);
        const data = await response.json();

        if (data.success) {
            renderChatMessages(data.messages);
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π:', error);
    }
}

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
function renderChatMessages(messages) {
    chatContainer.innerHTML = '';

    messages.forEach(msg => {
        const messageDiv = document.createElement('div');
        messageDiv.style.marginBottom = '10px';
        messageDiv.style.padding = '8px';
        messageDiv.style.borderRadius = '5px';
        messageDiv.style.backgroundColor = msg.is_admin ? '#f0f0f0' : '#e1f5fe';
        messageDiv.style.maxWidth = '80%';
        messageDiv.style.marginLeft = msg.is_admin ? '0' : 'auto';

        messageDiv.innerHTML = `
            <div style="font-weight: bold; color: ${msg.is_admin ? '#e91e63' : '#2196F3'}">${msg.sender_name}</div>
            <div>${msg.message}</div>
            <div style="font-size: 12px; color: #666; text-align: right;">${formatDateBY(msg.timestamp)}</div>
        `;

        chatContainer.appendChild(messageDiv);
    });

    // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –≤–Ω–∏–∑
    chatContainer.scrollTop = chatContainer.scrollHeight;
}

// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
sendChatMessageBtn.addEventListener('click', sendMessage);
chatMessageInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') sendMessage();
});

async function sendMessage() {
    const message = chatMessageInput.value.trim();
    if (!message || !currentChatRoomId) return;

    try {
        const response = await fetch(`/api/chat/rooms/${currentChatRoomId}/messages`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ message })
        });

        if (response.ok) {
            chatMessageInput.value = '';
            loadChatMessages(); // –û–±–Ω–æ–≤–ª—è–µ–º —á–∞—Ç
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:', error);
    }
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ SocketIO
socket.on('new_message', (data) => {
    if (data.room_id === currentChatRoomId) {
        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç
        const messageDiv = document.createElement('div');
        messageDiv.style.marginBottom = '10px';
        messageDiv.style.padding = '8px';
        messageDiv.style.borderRadius = '5px';
        messageDiv.style.backgroundColor = data.message.is_admin ? '#f0f0f0' : '#e1f5fe';
        messageDiv.style.maxWidth = '80%';
        messageDiv.style.marginLeft = data.message.is_admin ? '0' : 'auto';

        messageDiv.innerHTML = `
            <div style="font-weight: bold; color: ${data.message.is_admin ? '#e91e63' : '#2196F3'}">${data.message.sender_name}</div>
            <div>${data.message.message}</div>
            <div style="font-size: 12px; color: #666; text-align: right;">${formatDateBY(data.message.timestamp)}</div>
        `;

        chatContainer.appendChild(messageDiv);
        chatContainer.scrollTop = chatContainer.scrollHeight;
    }
});

    </script>
</body>
</html>